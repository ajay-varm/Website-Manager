<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <title>add your website</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script type="text/javascript">
(function() {
emailjs.init("user_zQaDBoC3WlS1z4YarWEEk");
})();
</script>
</head>
<body 
<header class="header">
    <div class="overlay has-fade"></div>
    <nav class="container container--pall flex flex-jc-sb flex-ai-c">
       
      <a href="/dist/" class="header__logo">
        <h1>Web Manager</h1>
      </a>
      <div>
    </nav>
</header>
<button  style="position:absolute;left:89%; top:1%" id="fireid" class="fire col">fire</button>
    <center>
        <h1 style ="color: darkblue; position:absolute; left:30%;top:27%; width:30%">Check your website</h1>
    </center>
 <center>   <input style =" position:absolute; left:30%;top:40%; width:30%" type= "text" id = "nameofweb" placeholder=" user name for your website" required/> </center><br>
<center>  <input style =" position:absolute;left:30%;top: 45%; width:30%;" type = "url" id = "weblink" placeholder=" Link of a website for screening" required/> </center><br>
<center>  <input style =" position:absolute; left:30%;top:50%; width:30%" type = "email" id = "emailnotify" placeholder=" Alerting Email" required/></center> <br><br>
<center> <button style =" position:absolute; left:30%;top:58%; width:30%"  onclick='return websit();'>Check</button></center>
<center>
    <a href="welcome.html" style ="color: darkcyan; position:absolute; left:30%;top:68%; width:30%">Go Back</a>
</center>
<script src="bundle.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
        import { getDatabase, ref, set, child, update, remove} from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js"
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBxAqhyYs0UDm2NGhZXiI8pEQ9GDiSgDpU",
          authDomain: "web-logins-8b63b.firebaseapp.com",
          databaseURL: "https://web-logins-8b63b-default-rtdb.firebaseio.com",
          projectId: "web-logins-8b63b",
          storageBucket: "web-logins-8b63b.appspot.com",
          messagingSenderId: "287483054692",
          appId: "1:287483054692:web:5f8663a071266ff1e36d71",
          measurementId: "G-J6HRVNJWCL"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
       // var user = firebase.auth().currentUser;
        var webname = document.getElementById("nameofweb");
        var weblink = document.getElementById("weblink");
        var Email = document.getElementById("emailnotify");

        var firebt = document.getElementById("fireid");

        function InsertData(){
            set(ref(db, "Users/"+ userUId),{
                webnamee: webname.value,
                weblinkk: weblink.value,
                email: Email.value
            })
            .then(()=>{
                alert("data stored successfullly")
                window.location.href = "welcome.html";

            })
            .catch((error)=>{
                alert(error);
            })
        }
        firebt.addEventListener('click', InsertData);
      </script>
    <script>
     function websit(){
        var givenlink = document.getElementById("weblink").value
        var myrequest = new Request(givenlink)

        var i,j ;
       // function check(){
         //   for(i= 0;i<1;i++)
          //  {
            fetch(myrequest).then(function(response){
            for(j= 0;j<1;j++)
                {
                    if(response.status == 200){
                        console.log(response.status + "running good")
                        window.location.href = "webgood.html";
                    }
                    else{
                        var tempParams = {
                        webname: document.getElementById("nameofweb").value,
                        weblink: document.getElementById("weblink").value,
                        Email: document.getElementById("emailnotify").value,
                        statuscode: response.status
                        } ;
                        emailjs.send('gmail_mini','gmail_template',tempParams)
                        .then(function(res){
                        console.log("success",res.status);
                        window.location.href = "mailsend.html";

                        //location.reload();
                        })}
            }
            })};//};
   // }
    </script>

</body>
</html>